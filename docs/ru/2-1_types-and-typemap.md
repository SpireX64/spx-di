# Ключи типов и карта типов
При использовании DI контейнера, чтобы контейнер контролировал строгость типизации,
а так же возвращал экземпляр именно того типа, который был запрошен.

Однако все определенные типы в коде TypeScript,
после компиляции пропадают и не доступны во время выполнения программы.

Чтобы разобраться с этой проблемой, контейнер требует определить
ключи и карту типов, чтобы уметь работать с ними после компиляции.

## Ключи типов
Ключи типов - это константные значения, которые идентифицируют конкретный тип в контейнере.
Именно по ключам выполняется привязка и получение экземпляров.

Как они хранятся, особо ни как не влияет.
Главное чтобы они были доступны при конфигурации контейнера и получения экземпляров из него.

Например, их можно определить в виде объекта "Types":
```ts
export const Types = {
    OutputPrinter: 'OutputPrinter',
    DateProvider: 'DateProvider',
}
```

## Карта типов
Теперь имея ключи, идентифицирующие типы в контейнере,
нужно как то связать их с типами определенными в TypeScript.

Для этого используется определение карты типов (TypeMap).
Это тип описывающий объект, ключом которого является ключ типа,
и TypeScript тип в качестве типа значения.

```ts
type OutputPrinter = (text: string) => void
type DateProvider = () => Date

export type TypeMap = {
    // [TypeKey]: TSType
    [Types.OutputPrinter]: OutputPrinter
    [Types.DateProvider]: DateProvider
}

```

С помощью карты типов, контейнер обеспечивает строгую типизацию
контейнера, проверяя типы во время конфигурации:

```ts
builder
    .bindInstance(Types.OutputPrinter, "hello")
    // TS2322: Type 'string' is not assignable to type 'OutputPrinter'.
```

А также выявляет типы во время получения экземпляров,
не заставляя выполнять дополнительный каст
и защищая от ошибок присвоения переменным не подходящих типов.
```ts
const printer = container.get(Types.OutputPrinter)
// printer: OutputPrinter

const getDate: DateProvider = container.get(Types.OutputPrinter)
// TS2322: Type 'OutputPrinter' is not assignable to type 'DateProvider'.
```